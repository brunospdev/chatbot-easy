generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

enum TipoSolicitacao {
  recibo
  despesa
  relatorio
}

enum StatusSolicitacao {
  sucesso
  erro
  pendente
}

enum StatusConfig {
  ativo
  inativo
}

model Plataforma {
  id_plataforma Int      @id @default(autoincrement())
  nome          String
  dominio       String
  administradores Administrador[]
  empresas        Empresa[]
}

model Administrador {
  id_admin      Int    @id @default(autoincrement())
  nome          String
  email         String @unique
  senha         String
  id_plataforma Int
  plataforma    Plataforma @relation(fields: [id_plataforma], references: [id_plataforma])
}

model Empresa {
  id_empresa    Int     @id @default(autoincrement())
  nome_empresa  String
  cnpj          String @unique
  telefone      String @unique
  id_plataforma Int
  plataforma    Plataforma @relation(fields: [id_plataforma], references: [id_plataforma])
  usuarios         Usuario[]
  configuracaoERP  ConfiguracaoERP?
}

model Usuario {
  id_usuario Int     @id @default(autoincrement())
  nome       String
  celular    String @unique
  id_empresa Int
  empresa    Empresa @relation(fields: [id_empresa], references: [id_empresa])
  solicitacoes Solicitacao[]
}

model Solicitacao {
  id_solicitacao   Int               @id @default(autoincrement())
  tipo_solicitacao TipoSolicitacao
  data_solicitacao DateTime          @default(now())
  status           StatusSolicitacao
  id_usuario Int
  usuario    Usuario           @relation(fields: [id_usuario], references: [id_usuario])
}

model ConfiguracaoERP {
  id_config  Int          @id @default(autoincrement())
  url_api    String
  token_api  String
  status     StatusConfig
  id_empresa Int          @unique
  empresa    Empresa      @relation(fields: [id_empresa], references: [id_empresa])
}